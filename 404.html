<!--
 ________  ____      ____  ______    
|_   __  ||_  _|    |_  _||_   _ `.  
  | |_ \_|  \ \  /\  / /    | | `. \ 
  |  _|      \ \/  \/ /     | |  | | 
 _| |_        \  /\  /     _| |_.' / 
|_____|        \/  \/     |______.'  
"Simplicity is soul of efficiency.""
https://github.com/fwd/nano-to
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Nano.to - Nano Username & Checkout UI</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0,user-scalable=0">
    <meta name="author" content="https://twitter.com/nano2dev"/>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="transparent">
    <meta name="apple-mobile-web-app-title" content="Nano.to">
    <meta property="og:title" content="Nano.to">
    <meta property="og:image" content="dist/images/cover.png">
    <meta property="twitter:image" content="dist/images/cover.png">
    <link rel="icon" type="image/png" href="dist/favicon.png">
    <link rel="apple-touch-icon" href="dist/images/new_icon.png">
    <link rel="stylesheet" href="dist/style.css">
    <link rel="stylesheet" href="dist/checkout.css">
    <link rel="stylesheet" href="dist/point-of-sale.css">
    <link rel="stylesheet" href="dist/confetti.css">
    <script src="dist/vue.min.js"></script>
    <script src="dist/axios.min.js"></script>
    <script src="dist/easy.qrcode.min.js"></script>
    <script src="dist/nanocurrency.min.js"></script>
  </head>
  <body>
    <div id="app" :class=" `on ${color}`">
      <div v-if="notification" :class="`notification ${status}`"><img :style="`filter:${checkout.color && checkout.color.background ? 'invert(1)' : 'invert(0)'};margin-bottom: 0px;max-width: 14px;margin-right: 12px;vertical-align: middle;margin-bottom: 2px;`" src="./dist/images/info2.png" class="lock-icon" style="margin-bottom: 0px;">{{ notification }}</div>
      <div v-if="loading" class="loader"></div>
      <div :style=" background ? `background-image: url('${ '${background}' }')` : `background-image: url('${ 'dist/images/unnamed.gif' }')` " id="backdrop"></div>

      <div v-if="success && success.confetti">
        <div v-for="i in 150" :class="`confetti-${i}`"></div>
      </div>

      <div v-if="success" id="success">
        <div>
          <h3 style="color:#2ecc71;margin: 0;">{{ success.title || 'Complete' }}</h3>
          <p style="margin-bottom: 0">{{ success.message }}</p>
          <button v-if="success.button" v-if="checkout.amount || checkout.plans.length" class="btn" :style="`color:${checkout.color && checkout.color.highlight_color ? checkout.color.highlight_color : ''};background:${checkout.color && checkout.color.highlight_background ? checkout.color.highlight_background : ''};`" @click="do_redirect()">
            <span>{{ success.button || 'Continue' }}</span>
          </button>
          <div class="redirecting" v-if="!success.confirm && success.redirect">{{ success.redirect_msg || 'Redirecting...' }}</div>
          <div v-if="success.confirm" class="close" @click="checkout = false; success = false">Close</div>
        </div>
      </div>

      <!-- Work in Progress-->
      <div v-if="point_of_sale" class="point-of-sale">
          <div class="device">
              <div class="products">
                  <ul class="product-list">
                      <li></li>
                      <li></li>
                      <li></li>
                      <li></li>
                      <li></li>
                      <li></li>
                      <li></li>
                      <li></li>
                      <li></li>
                  </ul>
              </div>
              <div class="checkout">

                  <ul class="checkout-list">
                      <li v-for="i in 50">1 &times; Item #1</li> 
                  </ul>

                  <div class="checkout-footer">
                    <div class="total">
                      <div>Total</div>
                      <div>$26</div>
                    </div>

                    <a href="#" >Checkout <i class="ion-ios-cart"></i></a>
                  </div>

              </div>
          </div>
      </div>

      <div v-if="!checkout" :class="`ak47 blue`">
        <div v-if="title" style="cursor: pointer;" @click="reset()">
          <h3 :class="`title ${status.status && status.status == false ? 'error' : ''}`" style="margin-top: 10px; font-size: 22px">
            <span v-if="false">nano.to/</span>{{ title }}
          </h3>
        </div>
        <div :class="`box--outer ${status.status && status.status == false ? 'error' : ''}`">
          <div class="box">
            <div class="box--inner">
              <div class="content">
                <div v-if="suggestions.length" id="search-screen" @click="suggestions = []"></div>
                <div class="holder" style="max-width: 440px">
                  <div v-if="search">
                    <p style="font-size: 20px; margin-bottom: 30px; margin-top: 0;">Search Blockchain</p>
                    <form @submit.prevent="query()">
                      <input type="text" v-model="string" placeholder="Username, Address, Hash" style="zoom: 1.2;background: #00000078;color: #FFF;">
                      <div class="suggest" v-if="suggestions.length">
                        <div v-for="suggestion in suggestions" @click="doSuggestion(suggestion)">
                          {{ capitalizeFirstLetter(suggestion.name) }}
                        </div>
                      </div>
                      <div style="display: block; height: 15px;"></div>
                      <div class="row centered">
                        <button class="cybr-btn" style="zoom: 0.6; margin: 20px auto; "> Search <span aria-hidden>_</span>
                          <span aria-hidden class="cybr-btn__glitch">NANO_</span>
                          <span aria-hidden class="cybr-btn__tag">N2</span>
                        </button>
                      </div>
                    </form>
                    <a :href="status.url ? status.url : 'https://docs.nano.to'" target="_blank">
                      <p style=" margin-top: 20px;font-size: 14px;opacity: 0.7;margin-bottom: -20px;text-transform: uppercase; ">
                        <span>{{ status.message ? status.message || 'API Experiencing Issues' : 'LEARN MORE' }}</span>
                      </p>
                    </a>
                    <div class="footer-icon">
                      <a href="http://github.com/fwd/nano" target="_blank" style="font-size: 15px; opacity: 0.7; text-transform: uppercase; filter: invert(1); display: block; max-width: 32px;">
                        <img src="dist/svg/github.svg" style="width: 100%">
                      </a>
                      <a v-if="point_of_sale" href="http://github.com/fwd/nano" target="_blank" style="font-size: 15px; opacity: 0.7; text-transform: uppercase; filter: invert(1); display: block; max-width: 28px;">
                        <img src="dist/svg/point-of-sale.svg" alt="" style="width: 100%">
                      </a>
                    </div>
                  </div>
                  <div v-if="!search">
                    <div v-if="prompt" class="small-mobile">
                      <div>
                        <h1 v-if="prompt.title" style="color: red; font-size: 40px !important; word-break: break-all; margin-top: 0px">{{ prompt.title }}</h1>
                        <p v-html="prompt.body"></p>
                      </div>
                    </div>
                    <div v-if="prompt && prompt.buttons && prompt.buttons.length" class="row centered button-group" :style="`margin-top: 30px; justify-content: ${prompt.buttons.length > 1 ? 'space-around' : ''}`">
                      <div v-for="button in prompt.buttons">
                        <a @click="doButton(button)">
                          <button class="cybr-btn" style="zoom: 0.6;">
                            {{ button.label }}
                            <span aria-hidden>_</span>
                            <span aria-hidden class="cybr-btn__glitch">{{ button.label }}
                              <span aria-hidden>_</span>
                            </span>
                            <span aria-hidden class="cybr-btn__tag">R25</span>
                          </button>
                          <a />
                      </div>
                    </div>
                    <a v-if="prompt.more" :href="prompt.more" target="_blank">
                      <p style=" margin-top: 20px; font-size: 15px; opacity: 0.7; margin-bottom: 15px; text-transform: uppercase;">
                        <span>{{ 'LEARN MORE' }}</span>
                      </p>
                    </a>
                    <a v-if="prompt" @click.prevent="prompt = false; search = true">
                      <p style=" margin-top: 30px; font-size: 14px; opacity: 0.7; margin-bottom: -20px; text-transform: uppercase;">
                        <span>{{ 'CANCEL' }}</span>
                      </p>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div v-if="checkout" id="checkout" class="flex">
        <div id="avatar" v-if="!checkout.fullscreen || checkout.cancel" :class="`flex center justify ${!checkout.plans || !checkout.plans.length ? '' : ''}`" @click="cancel()">
          <h3 :style="`color:${checkout.color && checkout.color.text ? checkout.color.text : '#000'};`">{{ checkout.cancel_text || '← Cancel' }}</h3>
        </div>
        <section v-if="checkout.plans" id="order" :class="`${checkout.plans.length || checkout.cancel ? 'cancel' : ''}`" :style="`background-color: ${checkout.color && checkout.color.left ? checkout.color.left : '#FFF'}; align-items: ${checkout.plans && checkout.plans.length < 4 ? 'start' : 'center'};`">
          <div class="about" :style="`color:${checkout.color && checkout.color.text ? checkout.color.text : '#000'};`">
            <div class="name flex center justify">
              <h2><span v-if="false">nano.to/</span>{{ checkout.title }}</h2>
              <p v-if="checkout.amount" class="price">{{ currency == 'NANO' ? 'Ӿ ' : currency }} {{ String(checkout.amount).includes('.') ? Number(checkout.amount).toFixed(3) : checkout.amount }}</p>
            </div>
            <img v-if="checkout.image" style="margin-bottom: 30px; border-radius: 5px;" :src="checkout.image" alt="">
            <p v-if="checkout.description || checkout.body || checkout.text || checkout.note || checkout.message" class="description" v-html="checkout.description || checkout.body || checkout.text || checkout.note || checkout.message"></p>
            <div class="plans">
              <div v-for="plan in checkout.plans" :style="`border-color:${checkout.color && checkout.color.primary ? checkout.color.primary : 'rgb(70 91 104 / 8%)'} !important; background: ${String(plan.value) === String(checkout.amount) ? '#000' : 'transparent'};};`" :class="`${String(plan.value) == String(checkout.amount) ? 'active' : ''}`">
                <div class="flex justify center" @click="clickPlan(plan)" >
                  <h4>
                    {{ plan.title || plan.name }}
                    <span :style="`color:${checkout.color && checkout.color.highlight_color ? checkout.color.highlight_color : ''};background:${checkout.color && checkout.color.highlight_background ? checkout.color.highlight_background : ''};`" v-if="plan.discount" class="discount">{{ Number(plan.discount) ? plan.discount + '% OFF' : plan.discount }}</span>
                  </h4>
                  <h4>{{ Number(plan.value) > 1 ? Math.floor(plan.value) : Number(plan.value).toFixed(3) }} {{ currency }}</h4>
                  <!-- <h4>{{ checkout.random_int ? String(Number(plan.value).toFixed(1)).replace('.0', '') : String(Number(plan.value).toFixed(3)).replace('.000', '') }} NANO</h4> -->
                </div>
              </div>
            </div>
            <div class="plans custom" v-if="!checkout.plans || checkout.custom">
              <div :class="`flex justify center`" :style="`border-color:${checkout.color && checkout.color.primary ? checkout.color.primary : 'rgb(70 91 104 / 8%)'};`">
                <h4>Enter amount: </h4>
                <div class="dinput">
                  <input type="number" inputmode="decimal" min="1" max="133248297" v-model="checkout.amount" >
              <!--     <select class="currency-select" v-model="currency">
                    <option value="USD">USD</option>
                    <option value="NANO">NANO</option>
                  </select> -->
                </div>
              </div>
            </div>
          </div>
        </section>
        <section id="payment" :style="checkout.color && checkout.color.right ? `background-color: ${checkout.color.right}` : 'background-color: #009dff'" :class="checkout.plans ? '' : 'full'">
          <div class="details">
            <div class="crypto">
              <h4 v-if="checkout.amount" class="instructions">
                <span class="faded" :style="`color:${checkout.color && checkout.color.text ? checkout.color.text : '#FFF'};`">{{ checkout.instruction || 'To complete, send:' }}</span>
                <b class="amount" :style="`color:${checkout.color && checkout.color.text ? checkout.color.text : '#FFF'};`">{{ checkout.amount }}
                  <span class="blocky">{{ 'NANO' }}</span>
                  <span class="hide-desktop"><img :style="`filter:${(checkout.color && checkout.color.background) || (checkout.color && checkout.color.address && checkout.color.address.background) ? 'invert(1)' : 'invert(0)'}`"src="./dist/images/clipboard.png" alt=""></span>
                </b>
                <span v-if="rate" :style="`color:${checkout.color && checkout.color.text ? checkout.color.text : '#FFF'};cursor: pointer;opacity: 0.7; display: block; margin-bottom: 10px;`">≈ {{ value }} {{ currency === 'NANO' ? 'USD' : currency }} @ <a :href="`https://www.coingecko.com/en/coins/nano/${currency !== 'NANO' ? currency.toLowerCase() : 'usd'}`"  :style="`color:${checkout.color && checkout.color.text ? checkout.color.text : ''};cursor: pointer;`" target="_blank" class="cursor"> {{ rate.toFixed(3) }} <img src="./dist/images/info2.png" alt="" class="info-icon">
                  </a>
                </span>
              </h4>
              <h1 v-if="!checkout.amount" :style="`color:${checkout.color && checkout.color.text ? checkout.color.text : ''};`">{{ checkout.title }}</h1>
              <p class="address" :style="`color:${checkout.color && checkout.color.address && checkout.color.address.highlight_color ? checkout.color.address.highlight_color : '#000'}; background:${checkout.color && checkout.color.address && checkout.color.address.highlight_background ? checkout.color.address.highlight_background : (checkout.color && checkout.color.address && checkout.color.highlight_background ? checkout.color.highlight_background : '#FFF')};`" @click="copy(checkout.address)">
                <span class="highlight" :style="`color:${checkout.color && checkout.color.vanity ? checkout.color.vanity : ''};`">{{ checkout.address.slice(0, 12) }}</span><span :style="`color:${checkout.color && checkout.color.highlight_color ? checkout.color.highlight_color : ''};`">{{ checkout.address.slice(12, 58) }}</span><span class="highlight" :style="`color:${checkout.color && checkout.color.vanity ? checkout.color.vanity : ''};`">{{ checkout.address.slice(59, 99) }}</span>
                <img src="./dist/images/clipboard.png" alt="">
              </p>
              <div class="qrSwitcher">
                <a :href="`nano:${checkout.address}${checkout.amount ? '?amount=' + convert(checkout.amount, 'NANO', 'RAW') : ''}`">
                  <div class="qrcode" :style="`border-color:${checkout.color && checkout.color.highlight_background ? checkout.color.highlight_background : '#FFF'}; background:${checkout.color && checkout.color.highlight_background ? checkout.color.highlight_background : '#FFF'};`">
                    <div id="qrcode"></div>
                  </div>
                  <div class="security-notice nano" :style="`color:${checkout.color && checkout.color.highlight_color ? checkout.color.highlight_color : ''};background:${checkout.color && checkout.color.highlight_background ? checkout.color.highlight_background : ''};`">
                    <img :style="`filter:${checkout.color && checkout.color.background ? 'invert(1)' : 'invert(0)'}`" src="./dist/images/info2.png" class="lock-icon" style="margin-bottom: 0px;"> {{ checkout.tip || 'Tap to open Natrium' }}
                  </div>
                </a>
              </div>
              <button v-if="checkout.amount || checkout.plans.length" class="button" :style="`color:${checkout.color && checkout.color.highlight_color ? checkout.color.highlight_color : ''};background:${checkout.color && checkout.color.highlight_background ? checkout.color.highlight_background : ''};`" @click="check()">
                <span>{{ checkout.buttonText || 'Check Payment' }}</span>
              </button>
              <div class="security-notice shrink">
                <div class="flex center" :style="`color:${checkout.color && checkout.color.text ? checkout.color.text : ''};`">{{ checkout.note || 'Verify the recipient address, and only send NANO (XNO) to this address.' }}</div>
              </div>
            </div>
          </div>
        </section>
      </div>

    </div>
    <script src="dist/app.js"></script>
  </body>
</html>
